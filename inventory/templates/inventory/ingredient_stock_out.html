{% extends "base.html" %}
{% block content %}
  <h1>Stock Out: {{ object.name }}</h1>
  <p><strong>Current Stock:</strong> {{ object.quantity }}</p>
  <form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-warning">Remove Stock</button>
    <a href="{% url 'ingredient-list' %}">Cancel</a>
  </form>

  <script>
document.addEventListener('DOMContentLoaded', function() {
    // Select all number inputs (or use a more specific selector if needed)
    document.querySelectorAll('input[type="number"]').forEach(function(input) {
        input.addEventListener('input', function() {
            if (this.value < 0) {
                this.value = '';
            }
            if (parseInt(this.value, 10) > currentStock) {
                alert('You cannot stock out more than the current amount (' + currentStock + ').');
                this.value = currentStock;
            }
        });
    });
});
</script>
{% endblock %}